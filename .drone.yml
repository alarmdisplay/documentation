---
kind: pipeline
type: docker
name: build

steps:
  - name: install
    image: composer:2.7.7@sha256:2088445f2bcaea6fe72cefcdd9ef0cb75139ee103459cc0d1dad496e19847d2c
    commands:
      - composer install
  - name: build
    image: php:8.2.22@sha256:db827a356587d50e2c89ad79cd11a2174d6a0d1e43aa9488a9e1b5a923012b18
    commands:
      - ./vendor/bin/daux generate
  - name: deploy
    image: cschlosser/drone-ftps@sha256:a376718d90e289d2d09860bf6d526bee2878f467dd61b819ec9e2c3eecc6821f
    environment:
      FTP_USERNAME:
        from_secret: username
      FTP_PASSWORD:
        from_secret: password
      PLUGIN_HOSTNAME:
        from_secret: ftphost
      PLUGIN_SRC_DIR: /static
      PLUGIN_DEST_DIR: /
      PLUGIN_MIRROR_OPTS: -e
      PLUGIN_CLEAN_DIR: false
    when:
      event:
        exclude:
          - pull_request

trigger:
  branch:
    include:
      - main
---
kind: signature
hmac: e945601f94cfad3218230d189d4acfcad8a21d2934c326188b3c1a5d5c39c3c6

...
